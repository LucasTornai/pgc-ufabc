<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>SExec.hs</title>
</head>
<head>
<link type='text/css' rel='stylesheet' href='liquid.css' />
</head>

<body>
<hr>
Put mouse over identifiers to see inferred types
<pre><span class=hs-linenum> 1: </span><a class=annot href="#"><span class=annottext>GHC.Types.Module</span><span class='hs-keyword'>{-@</span></a> <span class='hs-conid'>LIQUID</span> <span class='hs-str'>"--reflection"</span> <span class='hs-keyword'>@-}</span>
<span class=hs-linenum> 2: </span><span class='hs-keyword'>{-@</span> <span class='hs-conid'>LIQUID</span> <span class='hs-str'>"--ple"</span>        <span class='hs-keyword'>@-}</span>
<span class=hs-linenum> 3: </span><span class='hs-comment'>{- LIQUID "--no-totality"        @-}</span>
<span class=hs-linenum> 4: </span>
<span class=hs-linenum> 5: </span><span class='hs-keyword'>module</span> <span class='hs-conid'>SExec</span> <span class='hs-keyword'>where</span>
<span class=hs-linenum> 6: </span>
<span class=hs-linenum> 7: </span><span class='hs-keyword'>import</span> <span class='hs-conid'>Memory</span>
<span class=hs-linenum> 8: </span><span class='hs-keyword'>import</span> <span class='hs-keyword'>qualified</span> <span class='hs-conid'>Data.Set</span> <span class='hs-keyword'>as</span> <span class='hs-conid'>S</span> 
<span class=hs-linenum> 9: </span>
<span class=hs-linenum>10: </span><span class='hs-keyword'>type</span> <span class='hs-conid'>Acc</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Int</span> 
<span class=hs-linenum>11: </span><span class='hs-keyword'>type</span> <span class='hs-conid'>Reg</span> <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Int</span> 
<span class=hs-linenum>12: </span><span class='hs-keyword'>type</span> <span class='hs-conid'>Config</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-conid'>Acc</span><span class='hs-layout'>,</span> <span class='hs-conid'>Mem</span> <span class='hs-conid'>Reg</span><span class='hs-layout'>)</span> 
<span class=hs-linenum>13: </span>
<span class=hs-linenum>14: </span><span class='hs-keyword'>data</span> <span class='hs-conid'>Code</span> 
<span class=hs-linenum>15: </span>  <span class='hs-keyglyph'>=</span> <span class='hs-conid'>Load</span> <span class='hs-conid'>Int</span> <span class='hs-conid'>Code</span> 
<span class=hs-linenum>16: </span>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Store</span> <span class='hs-conid'>Reg</span> <span class='hs-conid'>Code</span> 
<span class=hs-linenum>17: </span>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Add</span>   <span class='hs-conid'>Reg</span> <span class='hs-conid'>Code</span> 
<span class=hs-linenum>18: </span>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Free</span>  <span class='hs-conid'>Reg</span> <span class='hs-conid'>Code</span> 
<span class=hs-linenum>19: </span>  <span class='hs-keyglyph'>|</span> <span class='hs-conid'>Halt</span> 
<span class=hs-linenum>20: </span>
<span class=hs-linenum>21: </span><span class='hs-keyword'>{-@</span> <span class='hs-varid'>exec</span> <span class='hs-keyglyph'>::</span> <span class='hs-varid'>c</span><span class='hs-conop'>:</span><span class='hs-conid'>Code</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-layout'>(</span><span class='hs-varid'>a</span><span class='hs-keyglyph'>::</span><span class='hs-conid'>Acc</span><span class='hs-layout'>,</span> <span class='hs-keyword'>{m:</span><span class='hs-conid'>Mem</span> <span class='hs-conid'>Int</span> <span class='hs-keyword'>| validMem m c a}</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Config</span> <span class='hs-keyword'>@-}</span>
<span class=hs-linenum>22: </span><span class='hs-definition'>exec</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Code</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Config</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Config</span>
<span class=hs-linenum>23: </span><a class=annot href="#"><span class=annottext>x1:SExec.Code -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))&lt;\x1 VV -&gt; {m : (Memory.Mem GHC.Types.Int) | validMem m x1 x1}&gt; -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-definition'>exec</span></a> <span class='hs-layout'>(</span><span class='hs-conid'>Load</span> <span class='hs-varid'>n</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-varid'>a</span><span class='hs-layout'>,</span><span class='hs-varid'>m</span><span class='hs-layout'>)</span>  <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:SExec.Code -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))&lt;\x1 VV -&gt; {m : (Memory.Mem GHC.Types.Int) | validMem m x1 x1}&gt; -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-varid'>exec</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : (GHC.Types.Int, (Memory.Mem GHC.Types.Int)) | x_Tuple22 v == m
                                                   &amp;&amp; x_Tuple21 v == n
                                                   &amp;&amp; lqdc##$select v == m
                                                   &amp;&amp; lqdc##$select v == n
                                                   &amp;&amp; snd v == m
                                                   &amp;&amp; fst v == n
                                                   &amp;&amp; v == (,) n m}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == n}</span><span class='hs-varid'>n</span></a><span class='hs-layout'>,</span><a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span>  
<span class=hs-linenum>24: </span><span class='hs-definition'>exec</span> <span class='hs-layout'>(</span><span class='hs-conid'>Store</span> <span class='hs-varid'>r</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span> <span class='hs-layout'>(</span><span class='hs-varid'>a</span><span class='hs-layout'>,</span><span class='hs-varid'>m</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:SExec.Code -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))&lt;\x1 VV -&gt; {m : (Memory.Mem GHC.Types.Int) | validMem m x1 x1}&gt; -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-varid'>exec</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : (GHC.Types.Int, (Memory.Mem GHC.Types.Int)) | x_Tuple21 v == a
                                                   &amp;&amp; lqdc##$select v == a
                                                   &amp;&amp; fst v == a}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a><span class='hs-layout'>,</span><a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | memAddrs v == Set_cup (Set_sng r) (memAddrs m)
                                  &amp;&amp; v == set r a m}</span><span class='hs-varid'>set</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> 
<span class=hs-linenum>25: </span><span class='hs-definition'>exec</span> <span class='hs-layout'>(</span><span class='hs-conid'>Add</span> <span class='hs-varid'>r</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span>   <span class='hs-layout'>(</span><span class='hs-varid'>a</span><span class='hs-layout'>,</span><span class='hs-varid'>m</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:SExec.Code -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))&lt;\x1 VV -&gt; {m : (Memory.Mem GHC.Types.Int) | validMem m x1 x1}&gt; -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-varid'>exec</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : (GHC.Types.Int, (Memory.Mem GHC.Types.Int)) | x_Tuple22 v == m
                                                   &amp;&amp; lqdc##$select v == m
                                                   &amp;&amp; snd v == m}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a> <span class='hs-varop'>`add`</span> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == get r m
                     &amp;&amp; v == (if r == addr m then val m else get r (mem m))}</span><span class='hs-varid'>get</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a> <span class='hs-layout'>,</span><a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> 
<span class=hs-linenum>26: </span><span class='hs-definition'>exec</span> <span class='hs-layout'>(</span><span class='hs-conid'>Free</span> <span class='hs-varid'>r</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span>  <span class='hs-layout'>(</span><span class='hs-varid'>a</span><span class='hs-layout'>,</span><span class='hs-varid'>m</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:SExec.Code -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))&lt;\x1 VV -&gt; {m : (Memory.Mem GHC.Types.Int) | validMem m x1 x1}&gt; -&gt; (GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-varid'>exec</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : (GHC.Types.Int, (Memory.Mem GHC.Types.Int)) | x_Tuple21 v == a
                                                   &amp;&amp; lqdc##$select v == a
                                                   &amp;&amp; fst v == a}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a><span class='hs-layout'>,</span> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | memAddrs v == Set_dif (memAddrs m) (Set_sng r)
                                  &amp;&amp; v == unset r m}</span><span class='hs-varid'>unset</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span>
<span class=hs-linenum>27: </span><span class='hs-definition'>exec</span> <span class='hs-conid'>Halt</span>        <span class='hs-layout'>(</span><span class='hs-varid'>a</span><span class='hs-layout'>,</span><span class='hs-varid'>m</span><span class='hs-layout'>)</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{VV : forall a b &lt;p2 :: a b -&gt; Bool&gt;.
      x1:a -&gt; x2:{VV : b&lt;p2 x1&gt; | true} -&gt; {v : (a, b)&lt;\x5 VV -&gt; {VV : b&lt;p2 x5&gt; | true}&gt; | x_Tuple22 v == x2
                                                                                           &amp;&amp; x_Tuple21 v == x1
                                                                                           &amp;&amp; lqdc##$select v == x2
                                                                                           &amp;&amp; lqdc##$select v == x1
                                                                                           &amp;&amp; snd v == x2
                                                                                           &amp;&amp; fst v == x1
                                                                                           &amp;&amp; v == (,) x1 x2} | VV == (,)}</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a><span class='hs-layout'>,</span><a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> 
<span class=hs-linenum>28: </span>
<span class=hs-linenum>29: </span>
<span class=hs-linenum>30: </span><span class='hs-keyword'>{-@</span> <span class='hs-varid'>reflect</span> <span class='hs-varid'>validMem</span> <span class='hs-keyword'>@-}</span>
<span class=hs-linenum>31: </span><span class='hs-definition'>validMem</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Mem</span> <span class='hs-conid'>Int</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Code</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Acc</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Bool</span> 
<span class=hs-linenum>32: </span><a class=annot href="#"><span class=annottext>x1:(Memory.Mem GHC.Types.Int) -&gt; x2:SExec.Code -&gt; x3:GHC.Types.Int -&gt; {VV : GHC.Types.Bool | VV == validMem x1 x2 x3}</span><span class='hs-definition'>validMem</span></a> <a class=annot href="#"><span class=annottext>(Memory.Mem GHC.Types.Int)</span><span class='hs-varid'>m</span></a> <span class='hs-layout'>(</span><span class='hs-conid'>Add</span> <span class='hs-varid'>r</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span> <a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-varid'>a</span></a> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>GHC.Types.Bool</span><span class='hs-keyword'>if</span></a> <a class=annot href="#"><span class=annottext>GHC.Types.Bool</span><span class='hs-conid'>S.member</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : (Data.Set.Internal.Set GHC.Types.Int) | v == memAddrs m}</span><span class='hs-layout'>(</span></a><span class='hs-varid'>memAddrs</span> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> <span class='hs-keyword'>then</span> <a class=annot href="#"><span class=annottext>x1:(Memory.Mem GHC.Types.Int) -&gt; x2:SExec.Code -&gt; x3:GHC.Types.Int -&gt; {VV : GHC.Types.Bool | VV == validMem x1 x2 x3}</span><span class='hs-varid'>validMem</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a> <span class='hs-varop'>`add`</span> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == get r m
                     &amp;&amp; v == (if r == addr m then val m else get r (mem m))}</span><span class='hs-varid'>get</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> <span class='hs-keyword'>else</span> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Bool | not v
                      &amp;&amp; v == False}</span><span class='hs-conid'>False</span></a>
<span class=hs-linenum>33: </span><span class='hs-definition'>validMem</span> <span class='hs-varid'>m</span> <span class='hs-layout'>(</span><span class='hs-conid'>Load</span> <span class='hs-varid'>n</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:(Memory.Mem GHC.Types.Int) -&gt; x2:SExec.Code -&gt; x3:GHC.Types.Int -&gt; {VV : GHC.Types.Bool | VV == validMem x1 x2 x3}</span><span class='hs-varid'>validMem</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == n}</span><span class='hs-varid'>n</span></a>
<span class=hs-linenum>34: </span><span class='hs-definition'>validMem</span> <span class='hs-varid'>m</span> <span class='hs-layout'>(</span><span class='hs-conid'>Store</span> <span class='hs-varid'>r</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:(Memory.Mem GHC.Types.Int) -&gt; x2:SExec.Code -&gt; x3:GHC.Types.Int -&gt; {VV : GHC.Types.Bool | VV == validMem x1 x2 x3}</span><span class='hs-varid'>validMem</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | memAddrs v == Set_cup (Set_sng r) (memAddrs m)
                                  &amp;&amp; v == set r a m}</span><span class='hs-layout'>(</span></a><span class='hs-varid'>set</span> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a>  
<span class=hs-linenum>35: </span><span class='hs-definition'>validMem</span> <span class='hs-varid'>m</span> <span class='hs-layout'>(</span><span class='hs-conid'>Free</span> <span class='hs-varid'>r</span> <span class='hs-varid'>c</span><span class='hs-layout'>)</span> <span class='hs-varid'>a</span>  <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>x1:(Memory.Mem GHC.Types.Int) -&gt; x2:SExec.Code -&gt; x3:GHC.Types.Int -&gt; {VV : GHC.Types.Bool | VV == validMem x1 x2 x3}</span><span class='hs-varid'>validMem</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | memAddrs v == Set_dif (memAddrs m) (Set_sng r)
                                  &amp;&amp; v == unset r m}</span><span class='hs-layout'>(</span></a><span class='hs-varid'>unset</span> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == r}</span><span class='hs-varid'>r</span></a> <a class=annot href="#"><span class=annottext>{v : (Memory.Mem GHC.Types.Int) | v == m}</span><span class='hs-varid'>m</span></a><span class='hs-layout'>)</span> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == c}</span><span class='hs-varid'>c</span></a> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Int | v == a}</span><span class='hs-varid'>a</span></a>  
<span class=hs-linenum>36: </span><span class='hs-definition'>validMem</span> <span class='hs-varid'>m</span> <span class='hs-keyword'>_</span> <span class='hs-varid'>a</span> <span class='hs-keyglyph'>=</span> <a class=annot href="#"><span class=annottext>{v : GHC.Types.Bool | v
                      &amp;&amp; v == True}</span><span class='hs-conid'>True</span></a> 
<span class=hs-linenum>37: </span>
<span class=hs-linenum>38: </span>
<span class=hs-linenum>39: </span><span class='hs-keyword'>{-@</span> <span class='hs-keyword'>type</span> <span class='hs-conid'>ValidCode</span> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>{</span><span class='hs-varid'>c</span><span class='hs-conop'>:</span><span class='hs-conid'>Code</span> <span class='hs-keyglyph'>|</span> <span class='hs-varid'>validMem</span> <span class='hs-conid'>MEmp</span> <span class='hs-varid'>c</span> <span class='hs-num'>0</span> <span class='hs-layout'>}</span> <span class='hs-keyword'>@-}</span>
<span class=hs-linenum>40: </span><span class='hs-keyword'>{-@</span> <span class='hs-varid'>code</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>ValidCode</span>  <span class='hs-keyword'>@-}</span> 
<span class=hs-linenum>41: </span><span class='hs-definition'>code</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Code</span> 
<span class=hs-linenum>42: </span><a class=annot href="#"><span class=annottext>{VV : SExec.Code | validMem MEmp VV 0}</span><span class='hs-definition'>code</span></a> <span class='hs-keyglyph'>=</span>  <span class='hs-conid'>Store</span> <a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-num'>0</span></a> <a class=annot href="#"><span class=annottext>SExec.Code</span><span class='hs-layout'>(</span></a><span class='hs-conid'>Load</span> <a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-num'>42</span></a> <a class=annot href="#"><span class=annottext>SExec.Code</span><span class='hs-layout'>(</span></a><span class='hs-conid'>Store</span> <a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-num'>42</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | Add##lqdc##$select v == Halt}</span><span class='hs-layout'>(</span></a> <span class='hs-conid'>Add</span> <a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-num'>42</span></a> <a class=annot href="#"><span class=annottext>{v : SExec.Code | v == Halt}</span><span class='hs-conid'>Halt</span></a><span class='hs-layout'>)</span><span class='hs-layout'>)</span><span class='hs-layout'>)</span>
<span class=hs-linenum>43: </span>
<span class=hs-linenum>44: </span><span class='hs-definition'>runExample</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Config</span> 
<span class=hs-linenum>45: </span><a class=annot href="#"><span class=annottext>(GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-definition'>runExample</span></a> <span class='hs-keyglyph'>=</span> <span class='hs-varid'>exec</span> <a class=annot href="#"><span class=annottext>{v : SExec.Code | validMem MEmp v 0
                  &amp;&amp; v == code}</span><span class='hs-varid'>code</span></a> <a class=annot href="#"><span class=annottext>(GHC.Types.Int, (Memory.Mem GHC.Types.Int))</span><span class='hs-layout'>(</span></a><a class=annot href="#"><span class=annottext>GHC.Types.Int</span><span class='hs-num'>0</span></a><span class='hs-layout'>,</span><a class=annot href="#"><span class=annottext>{VV : forall a .
      {v : (Memory.Mem a) | memAddrs v == Set_empty 0
                            &amp;&amp; v == MEmp} | VV == MEmp}</span><span class='hs-conid'>MEmp</span></a><span class='hs-layout'>)</span>
<span class=hs-linenum>46: </span>
<span class=hs-linenum>47: </span>
<span class=hs-linenum>48: </span>
<span class=hs-linenum>49: </span><span class='hs-keyword'>{-@</span> <span class='hs-varid'>reflect</span> <span class='hs-varid'>add</span> <span class='hs-keyword'>@-}</span>
<span class=hs-linenum>50: </span><span class='hs-definition'>add</span> <span class='hs-keyglyph'>::</span> <span class='hs-conid'>Int</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int</span> <span class='hs-keyglyph'>-&gt;</span> <span class='hs-conid'>Int</span> 
<span class=hs-linenum>51: </span><a class=annot href="#"><span class=annottext>x1:GHC.Types.Int -&gt; x2:GHC.Types.Int -&gt; {VV : GHC.Types.Int | VV == add x1 x2
                                                              &amp;&amp; VV == x1 + x2}</span><span class='hs-definition'>add</span></a> <span class='hs-keyglyph'>=</span> <span class='hs-layout'>(</span><span class='hs-varop'>+</span><span class='hs-layout'>)</span>
<span class=hs-linenum>52: </span>
<span class=hs-linenum>53: </span>
</pre>
</body>
</html>